#pragma once

#include "../dfgDefs.hpp" // For DFG_STRINGIZE
#include "../preprocessor/compilerInfoMsvc.hpp"

// For more robust implementation, see Boost.Predef
// #include <boost/predef.h>

/*
 This file defines the following items:
    -DFG_COMPILER_FULL_VERSION   : Full compiler description string in implementation defined format.
    -DFG_COMPILER_NAME_SIMPLE    : Simple compiler name string
    -DFG_BUILD_DEBUG_RELEASE_TYPE: Build type in debug-release axis.
*/


#define DFG_COMPILER_NAME_SIMPLE_VC2010          "MSVC_2010"
#define DFG_COMPILER_NAME_SIMPLE_VC2012          "MSVC_2012"
#define DFG_COMPILER_NAME_SIMPLE_VC2013          "MSVC_2013"
#define DFG_COMPILER_NAME_SIMPLE_VC2015_RTM      "MSVC_2015_rtm"
#define DFG_COMPILER_NAME_SIMPLE_VC2015_UPDATE1  "MSVC_2015_u1"
#define DFG_COMPILER_NAME_SIMPLE_VC2015_UPDATE2  "MSVC_2015_u2"
#define DFG_COMPILER_NAME_SIMPLE_VC2015_UPDATE3  "MSVC_2015_u3"
#define DFG_COMPILER_NAME_SIMPLE_VC2017          "MSVC_2017"
#define DFG_COMPILER_NAME_SIMPLE_VC2017_3        "MSVC_2017.3"
#define DFG_COMPILER_NAME_SIMPLE_VC2017_5        "MSVC_2017.5"
#define DFG_COMPILER_NAME_SIMPLE_VC2017_6        "MSVC_2017.6"
#define DFG_COMPILER_NAME_SIMPLE_VC2017_7        "MSVC_2017.7"
#define DFG_COMPILER_NAME_SIMPLE_VC2017_8        "MSVC_2017.8"
#define DFG_COMPILER_NAME_SIMPLE_VC2017_9        "MSVC_2017.9"
#define DFG_COMPILER_NAME_SIMPLE_VC2019_0        "MSVC_2019.0"
#define DFG_COMPILER_NAME_SIMPLE_VC2019_1        "MSVC_2019.1"
#define DFG_COMPILER_NAME_SIMPLE_VC2019_2        "MSVC_2019.2"
#define DFG_COMPILER_NAME_SIMPLE_VC2019_3        "MSVC_2019.3"
#define DFG_COMPILER_NAME_SIMPLE_VC2019_4        "MSVC_2019.4"
#define DFG_COMPILER_NAME_SIMPLE_VC2019_5        "MSVC_2019.5"
#define DFG_COMPILER_NAME_SIMPLE_VC2019_6        "MSVC_2019.6"
#define DFG_COMPILER_NAME_SIMPLE_VC2019_7        "MSVC_2019.7"
#define DFG_COMPILER_NAME_SIMPLE_VC2019_8_9      "MSVC_2019.8/9"
#define DFG_COMPILER_NAME_SIMPLE_VC2019_10_11    "MSVC_2019.10/11"
#define DFG_COMPILER_NAME_SIMPLE_VC2022_0        "MSVC_2022.0"
#define DFG_COMPILER_NAME_SIMPLE_VC2022_1        "MSVC_2022.1"
#define DFG_COMPILER_NAME_SIMPLE_VC2022_2        "MSVC_2022.2"
#define DFG_COMPILER_NAME_SIMPLE_VC2022_3        "MSVC_2022.3"
#define DFG_COMPILER_NAME_SIMPLE_VC2022_4        "MSVC_2022.4"
#define DFG_COMPILER_NAME_SIMPLE_VC2022_5        "MSVC_2022.5"
#define DFG_COMPILER_NAME_SIMPLE_VC2022_6        "MSVC_2022.6"
#define DFG_COMPILER_NAME_SIMPLE_VC2022_7        "MSVC_2022.7"
#define DFG_COMPILER_NAME_SIMPLE_VC2022_8        "MSVC_2022.8"
#define DFG_COMPILER_NAME_SIMPLE_VC2022_9        "MSVC_2022.9"
#define DFG_COMPILER_NAME_SIMPLE_VC_UNKNOWN      "MSVC_" DFG_STRINGIZE(_MSC_VER)
#define DFG_COMPILER_NAME_SIMPLE_UNKNOWN         "UNKNOWN_COMPILER"

#if DFG_MSVC_VER == DFG_MSVC_VER_2010
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2010
#elif DFG_MSVC_VER == DFG_MSVC_VER_2012
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2012
#elif DFG_MSVC_VER == DFG_MSVC_VER_2013
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2013
#elif defined(_MSC_FULL_VER) && _MSC_FULL_VER == 190023026  // Compiler versions are from http://stackoverflow.com/questions/30760889/unknown-compiler-version-while-compiling-boost-with-msvc-14-0-vs-2015
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2015_RTM
#elif defined(_MSC_FULL_VER) && _MSC_FULL_VER == 190023506
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2015_UPDATE1
#elif defined(_MSC_FULL_VER) && _MSC_FULL_VER == 190023918
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2015_UPDATE2
#elif defined(_MSC_FULL_VER) && _MSC_FULL_VER == 190024215 // Was 190024210 in the link above, changed to this based on version in AppVeyor build.
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2015_UPDATE3
#elif DFG_MSVC_VER == DFG_MSVC_VER_2017
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2017
#elif DFG_MSVC_VER == DFG_MSVC_VER_2017_3
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2017_3
#elif DFG_MSVC_VER == DFG_MSVC_VER_2017_5
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2017_5
#elif DFG_MSVC_VER == DFG_MSVC_VER_2017_6
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2017_6
#elif DFG_MSVC_VER == DFG_MSVC_VER_2017_7
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2017_7
#elif DFG_MSVC_VER == DFG_MSVC_VER_2017_8
	#define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2017_8
#elif DFG_MSVC_VER == DFG_MSVC_VER_2017_9
	#define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2017_9
#elif DFG_MSVC_VER == DFG_MSVC_VER_2019_0
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2019_0
#elif DFG_MSVC_VER == DFG_MSVC_VER_2019_1
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2019_1
#elif DFG_MSVC_VER == DFG_MSVC_VER_2019_2
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2019_2
#elif DFG_MSVC_VER == DFG_MSVC_VER_2019_3
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2019_3
#elif DFG_MSVC_VER == DFG_MSVC_VER_2019_4
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2019_4
#elif DFG_MSVC_VER == DFG_MSVC_VER_2019_5
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2019_5
#elif DFG_MSVC_VER == DFG_MSVC_VER_2019_6
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2019_6
#elif DFG_MSVC_VER == DFG_MSVC_VER_2019_7
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2019_7
#elif DFG_MSVC_VER == DFG_MSVC_VER_2019_8_9
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2019_8_9
#elif DFG_MSVC_VER == DFG_MSVC_VER_2019_10_11
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2019_10_11
#elif DFG_MSVC_VER == DFG_MSVC_VER_2022_0
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2022_0
#elif DFG_MSVC_VER == DFG_MSVC_VER_2022_1
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2022_1
#elif DFG_MSVC_VER == DFG_MSVC_VER_2022_2
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2022_2
#elif DFG_MSVC_VER == DFG_MSVC_VER_2022_3
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2022_3
#elif DFG_MSVC_VER == DFG_MSVC_VER_2022_4
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2022_4
#elif DFG_MSVC_VER == DFG_MSVC_VER_2022_5
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2022_5
#elif DFG_MSVC_VER == DFG_MSVC_VER_2022_6
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2022_6
#elif DFG_MSVC_VER == DFG_MSVC_VER_2022_7
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2022_7
#elif DFG_MSVC_VER == DFG_MSVC_VER_2022_8
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2022_8
#elif DFG_MSVC_VER == DFG_MSVC_VER_2022_9
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC2022_9
#elif defined(_MSC_FULL_VER)
    #pragma message("dfglib: Unrecognized MSVC compiler, _MSC_FULL_VER = " DFG_STRINGIZE(_MSC_FULL_VER))
    #define DFG_COMPILER_NAME_SIMPLE_MSVC DFG_COMPILER_NAME_SIMPLE_VC_UNKNOWN
#elif defined(__MINGW32__)
    #define DFG_COMPILER_NAME_SIMPLE "MinGW_" DFG_STRINGIZE(__GNUC__) "." DFG_STRINGIZE(__GNUC_MINOR__) "." DFG_STRINGIZE(__GNUC_PATCHLEVEL__)
    //#define DFG_COMPILER_FULL_VERSION ((__GNUC__ * 10000) + (__GNUC_MINOR__ * 100) + (__GNUC_PATCHLEVEL__))
    #define DFG_COMPILER_FULL_VERSION __VERSION__
#elif defined(__clang__)
    #define DFG_COMPILER_NAME_SIMPLE "Clang_" DFG_STRINGIZE(__clang_major__) "." DFG_STRINGIZE(__clang_minor__) "." DFG_STRINGIZE(__clang_patchlevel__)
    //#define DFG_COMPILER_FULL_VERSION ((__clang_major__ * 10000) + (__clang_minor__ * 100) + (__clang_patchlevel__))
    #define DFG_COMPILER_FULL_VERSION __VERSION__
#elif defined(__GNUG__)
    #define DFG_COMPILER_NAME_SIMPLE "GCC_" DFG_STRINGIZE(__GNUC__) "." DFG_STRINGIZE(__GNUC_MINOR__) "." DFG_STRINGIZE(__GNUC_PATCHLEVEL__)
    //#define DFG_COMPILER_FULL_VERSION ((__GNUC__ * 10000) + (__GNUC_MINOR__ * 100) + (__GNUC_PATCHLEVEL__))
    #define DFG_COMPILER_FULL_VERSION __VERSION__
#else
    #define DFG_COMPILER_NAME_SIMPLE DFG_COMPILER_NAME_SIMPLE_UNKNOWN
    #define DFG_COMPILER_FULL_VERSION   ""
    #pragma message("Note: Unrecognized compiler")
#endif

#if defined(DFG_COMPILER_NAME_SIMPLE_MSVC)
    #if defined(__clang__) // Case: clang-cl
        #define DFG_COMPILER_NAME_SIMPLE "clang-cl_" DFG_STRINGIZE(__clang_major__) "." DFG_STRINGIZE(__clang_minor__) "." DFG_STRINGIZE(__clang_patchlevel__) "_" DFG_COMPILER_NAME_SIMPLE_MSVC
        #define DFG_COMPILER_FULL_VERSION __VERSION__ " MSVC " DFG_STRINGIZE(_MSC_FULL_VER)
    #else // Case: pure MSVC
        #define DFG_COMPILER_NAME_SIMPLE     DFG_COMPILER_NAME_SIMPLE_MSVC
        #define DFG_COMPILER_FULL_VERSION    DFG_STRINGIZE(_MSC_FULL_VER)
    #endif
#endif

#if (defined(_MSC_VER) && defined(_DEBUG)) || (!defined(_MSC_VER) && !defined(NDEBUG))
    #define DFG_BUILD_DEBUG_RELEASE_TYPE    "debug"
#else
    #define DFG_BUILD_DEBUG_RELEASE_TYPE    "release"
#endif
